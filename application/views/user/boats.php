<main>
    <!-- Step Section Start -->
    <section class="step-section pt-5 pb-2">
        <div
            class="container d-flex gap-3 align-items-center justify-content-center"
        >
            <!-- align-items-center mengatur tata letak secara vertikal -->
            <!-- justify-content-center mengatur tata letak secara horizontal-->
            <div class="step-boat">
                <div
                    class="circle mx-auto d-flex justify-content-center align-items-center"
                >
                    <i class="fa-solid fa-ship"></i>
                </div>
                <h5 class="mb-0 mt-2 text-center">CHOOSE BOAT</h5>
            </div>
            <svg
                width="162"
                height="24"
                viewBox="0 0 162 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M161.061 13.0607C161.646 12.4749 161.646 11.5251 161.061 10.9393L151.515 1.3934C150.929 0.807611 149.979 0.807611 149.393 1.3934C148.808 1.97919 148.808 2.92893 149.393 3.51472L157.879 12L149.393 20.4853C148.808 21.0711 148.808 22.0208 149.393 22.6066C149.979 23.1924 150.929 23.1924 151.515 22.6066L161.061 13.0607ZM0 13.5H2V10.5H0V13.5ZM6 13.5H10V10.5H6V13.5ZM14 13.5H18V10.5H14V13.5ZM22 13.5H26V10.5H22V13.5ZM30 13.5H34V10.5H30V13.5ZM38 13.5H42V10.5H38V13.5ZM46 13.5H50V10.5H46V13.5ZM54 13.5H58V10.5H54V13.5ZM62 13.5H66V10.5H62V13.5ZM70 13.5H74V10.5H70V13.5ZM78 13.5H82V10.5H78V13.5ZM86 13.5H90V10.5H86V13.5ZM94 13.5H98V10.5H94V13.5ZM102 13.5H106V10.5H102V13.5ZM110 13.5H114V10.5H110V13.5ZM118 13.5H122V10.5H118V13.5ZM126 13.5H130V10.5H126V13.5ZM134 13.5H138V10.5H134V13.5ZM142 13.5H146V10.5H142V13.5ZM150 13.5H154V10.5H150V13.5ZM158 13.5H160V10.5H158V13.5ZM161.061 13.0607C161.646 12.4749 161.646 11.5251 161.061 10.9393L151.515 1.3934C150.929 0.807611 149.979 0.807611 149.393 1.3934C148.808 1.97919 148.808 2.92893 149.393 3.51472L157.879 12L149.393 20.4853C148.808 21.0711 148.808 22.0208 149.393 22.6066C149.979 23.1924 150.929 23.1924 151.515 22.6066L161.061 13.0607ZM0 13.5H2V10.5H0V13.5ZM6 13.5H10V10.5H6V13.5ZM14 13.5H18V10.5H14V13.5ZM22 13.5H26V10.5H22V13.5ZM30 13.5H34V10.5H30V13.5ZM38 13.5H42V10.5H38V13.5ZM46 13.5H50V10.5H46V13.5ZM54 13.5H58V10.5H54V13.5ZM62 13.5H66V10.5H62V13.5ZM70 13.5H74V10.5H70V13.5ZM78 13.5H82V10.5H78V13.5ZM86 13.5H90V10.5H86V13.5ZM94 13.5H98V10.5H94V13.5ZM102 13.5H106V10.5H102V13.5ZM110 13.5H114V10.5H110V13.5ZM118 13.5H122V10.5H118V13.5ZM126 13.5H130V10.5H126V13.5ZM134 13.5H138V10.5H134V13.5ZM142 13.5H146V10.5H142V13.5ZM150 13.5H154V10.5H150V13.5ZM158 13.5H160V10.5H158V13.5Z"
                    fill="#FDA43E"
                />
            </svg>
            <div class="step-tour">
                <div
                    class="circle mx-auto d-flex justify-content-center align-items-center"
                >
                    <i class="fa-solid fa-umbrella-beach"></i>
                </div>
                <h5 class="mb-0 mt-2 text-center">CHOOSE TOUR</h5>
            </div>
            <svg
                width="162"
                height="24"
                viewBox="0 0 162 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M161.061 13.0607C161.646 12.4749 161.646 11.5251 161.061 10.9393L151.515 1.3934C150.929 0.807611 149.979 0.807611 149.393 1.3934C148.808 1.97919 148.808 2.92893 149.393 3.51472L157.879 12L149.393 20.4853C148.808 21.0711 148.808 22.0208 149.393 22.6066C149.979 23.1924 150.929 23.1924 151.515 22.6066L161.061 13.0607ZM0 13.5H2V10.5H0V13.5ZM6 13.5H10V10.5H6V13.5ZM14 13.5H18V10.5H14V13.5ZM22 13.5H26V10.5H22V13.5ZM30 13.5H34V10.5H30V13.5ZM38 13.5H42V10.5H38V13.5ZM46 13.5H50V10.5H46V13.5ZM54 13.5H58V10.5H54V13.5ZM62 13.5H66V10.5H62V13.5ZM70 13.5H74V10.5H70V13.5ZM78 13.5H82V10.5H78V13.5ZM86 13.5H90V10.5H86V13.5ZM94 13.5H98V10.5H94V13.5ZM102 13.5H106V10.5H102V13.5ZM110 13.5H114V10.5H110V13.5ZM118 13.5H122V10.5H118V13.5ZM126 13.5H130V10.5H126V13.5ZM134 13.5H138V10.5H134V13.5ZM142 13.5H146V10.5H142V13.5ZM150 13.5H154V10.5H150V13.5ZM158 13.5H160V10.5H158V13.5ZM161.061 13.0607C161.646 12.4749 161.646 11.5251 161.061 10.9393L151.515 1.3934C150.929 0.807611 149.979 0.807611 149.393 1.3934C148.808 1.97919 148.808 2.92893 149.393 3.51472L157.879 12L149.393 20.4853C148.808 21.0711 148.808 22.0208 149.393 22.6066C149.979 23.1924 150.929 23.1924 151.515 22.6066L161.061 13.0607ZM0 13.5H2V10.5H0V13.5ZM6 13.5H10V10.5H6V13.5ZM14 13.5H18V10.5H14V13.5ZM22 13.5H26V10.5H22V13.5ZM30 13.5H34V10.5H30V13.5ZM38 13.5H42V10.5H38V13.5ZM46 13.5H50V10.5H46V13.5ZM54 13.5H58V10.5H54V13.5ZM62 13.5H66V10.5H62V13.5ZM70 13.5H74V10.5H70V13.5ZM78 13.5H82V10.5H78V13.5ZM86 13.5H90V10.5H86V13.5ZM94 13.5H98V10.5H94V13.5ZM102 13.5H106V10.5H102V13.5ZM110 13.5H114V10.5H110V13.5ZM118 13.5H122V10.5H118V13.5ZM126 13.5H130V10.5H126V13.5ZM134 13.5H138V10.5H134V13.5ZM142 13.5H146V10.5H142V13.5ZM150 13.5H154V10.5H150V13.5ZM158 13.5H160V10.5H158V13.5Z"
                    fill="#FDA43E"
                />
            </svg>
            <div class="step-co">
                <div
                    class="circle mx-auto d-flex justify-content-center align-items-center"
                >
                    <i class="fa-solid fa-credit-card"></i>
                </div>
                <h5 class="mb-0 mt-2 text-center">CHECKOUT & PAY</h5>
            </div>
            <svg
                width="162"
                height="24"
                viewBox="0 0 162 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M161.061 13.0607C161.646 12.4749 161.646 11.5251 161.061 10.9393L151.515 1.3934C150.929 0.807611 149.979 0.807611 149.393 1.3934C148.808 1.97919 148.808 2.92893 149.393 3.51472L157.879 12L149.393 20.4853C148.808 21.0711 148.808 22.0208 149.393 22.6066C149.979 23.1924 150.929 23.1924 151.515 22.6066L161.061 13.0607ZM0 13.5H2V10.5H0V13.5ZM6 13.5H10V10.5H6V13.5ZM14 13.5H18V10.5H14V13.5ZM22 13.5H26V10.5H22V13.5ZM30 13.5H34V10.5H30V13.5ZM38 13.5H42V10.5H38V13.5ZM46 13.5H50V10.5H46V13.5ZM54 13.5H58V10.5H54V13.5ZM62 13.5H66V10.5H62V13.5ZM70 13.5H74V10.5H70V13.5ZM78 13.5H82V10.5H78V13.5ZM86 13.5H90V10.5H86V13.5ZM94 13.5H98V10.5H94V13.5ZM102 13.5H106V10.5H102V13.5ZM110 13.5H114V10.5H110V13.5ZM118 13.5H122V10.5H118V13.5ZM126 13.5H130V10.5H126V13.5ZM134 13.5H138V10.5H134V13.5ZM142 13.5H146V10.5H142V13.5ZM150 13.5H154V10.5H150V13.5ZM158 13.5H160V10.5H158V13.5ZM161.061 13.0607C161.646 12.4749 161.646 11.5251 161.061 10.9393L151.515 1.3934C150.929 0.807611 149.979 0.807611 149.393 1.3934C148.808 1.97919 148.808 2.92893 149.393 3.51472L157.879 12L149.393 20.4853C148.808 21.0711 148.808 22.0208 149.393 22.6066C149.979 23.1924 150.929 23.1924 151.515 22.6066L161.061 13.0607ZM0 13.5H2V10.5H0V13.5ZM6 13.5H10V10.5H6V13.5ZM14 13.5H18V10.5H14V13.5ZM22 13.5H26V10.5H22V13.5ZM30 13.5H34V10.5H30V13.5ZM38 13.5H42V10.5H38V13.5ZM46 13.5H50V10.5H46V13.5ZM54 13.5H58V10.5H54V13.5ZM62 13.5H66V10.5H62V13.5ZM70 13.5H74V10.5H70V13.5ZM78 13.5H82V10.5H78V13.5ZM86 13.5H90V10.5H86V13.5ZM94 13.5H98V10.5H94V13.5ZM102 13.5H106V10.5H102V13.5ZM110 13.5H114V10.5H110V13.5ZM118 13.5H122V10.5H118V13.5ZM126 13.5H130V10.5H126V13.5ZM134 13.5H138V10.5H134V13.5ZM142 13.5H146V10.5H142V13.5ZM150 13.5H154V10.5H150V13.5ZM158 13.5H160V10.5H158V13.5Z"
                    fill="#FDA43E"
                />
            </svg>
            <div class="step-enjoy">
                <div
                    class="circle mx-auto d-flex justify-content-center align-items-center"
                >
                    <i class="fa-solid fa-champagne-glasses"></i>
                </div>
                <h5 class="mb-0 mt-2 text-center">ENJOY!</h5>
            </div>
        </div>
    </section>
    <!-- Step Section End -->

    <!-- Header Boat End-->
    <section class="header-boat my-5">
        <div class="container">
            <div class="row">
                <h2 class="text-center">CHOOSE YOUR BOAT !</h2>
            </div>
            <form action="<?= base_url('boats') ?>" method="post">
            <div class="row mt-5 gx-2">
                <div class="col-11">
                    <div class="row gx-2">
                        <div class="col-3">
                            <select class="btn-outline-primary w-100 form-select text-center px-0" name="boatStartPoint">
                                <option value="All" <?= !empty($boatStartPoint)?($boatStartPoint=='All'? 'selected':''):''; ?>>ALL ANCHOR POINT</option>
                                <option value="Bali" <?= !empty($boatStartPoint)?($boatStartPoint=='Bali'? 'selected':''):''; ?>>BALI</option>
                                <option value="Nusa Penida" <?= !empty($boatStartPoint)?($boatStartPoint=='Nusa Penida'? 'selected':''):''; ?>>NUSA PENIDA</option>
                            </select>
                        </div>
                        <div class="col-3">
                            <select class="btn-outline-primary w-100 form-select text-center px-0" name="boatType">
                                <option value="All" <?= !empty($boatType)?($boatType=='All'? 'selected':''):''; ?>>ALL TOUR TYPE</option>
                                <option value="Private" <?= !empty($boatType)?($boatType=='Private'? 'selected':''):''; ?>>PRIVATE</option>
                                <option value="Shared" <?= !empty($boatType)?($boatType=='Shared'? 'selected':''):''; ?>>SHARED</option>
                            </select>
                        </div>
                        <div class="col-3 position-relative">
                            <input class="datepicker btn-outline-primary w-100 text-center" value="<?= !empty($bookSchedule)?(date('d-m-Y', strtotime($bookSchedule))):(date('d-m-Y', strtotime('+2 days'))); ?>" placeholder="TOUR DATE" data-date-format="dd-mm-yyyy" name="bookSchedule" readonly>
                        </div>
                        <div class="col-3">
                            <div class="dropdown">
                                <button class="btn-outline-primary dropdown-toggle w-100" type="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false">
                                    PASSENGGER
                                </button>
                                <ul class="dropdown-menu w-100">
                                    <li><p class="text-center mb-0 mt-2 fw-bold text-white">Adults (14-60)</p></li>
                                    <li class="d-flex mx-3">
                                        <button type="button" class="max-people">
                                            <span class="adult-minus">
                                                <i class="fa-solid fa-minus"></i>
                                            </span>
                                        </button>
                                        <input class="form-control text-center" type="number" name="bookAdults" <?= !empty($bookAdults)?'value="'.$bookAdults.'"':'value="1"'; ?> readonly>
                                        <button type="button" class="max-people">
                                            <span class="adult-plus">
                                                <i class="fa-solid fa-plus"></i>
                                            </span>
                                        </button>
                                    </li>
                                    <li><p class="text-center mb-0 mt-2 fw-bold text-white">Teens (6-13)</p></li>
                                    <li class="d-flex mx-3">
                                        <button type="button" class="max-people">
                                            <span class="teen-minus">
                                                <i class="fa-solid fa-minus"></i>
                                            </span>
                                        </button>
                                        <input class="form-control text-center" type="number" name="bookTeens" <?= !empty($bookTeens)?'value="'.$bookTeens.'"':'value="0"'; ?> readonly>
                                        <button type="button" class="max-people">
                                            <span class="teen-plus">
                                                <i class="fa-solid fa-plus"></i>
                                            </span>
                                        </button>
                                    </li>
                                    <li><p class="text-center mb-0 mt-2 fw-bold text-white">Toddlers (0-5)</p></li>
                                    <li class="d-flex mx-3">
                                        <button type="button" class="max-people">
                                            <span class="toddler-minus">
                                                <i class="fa-solid fa-minus"></i>
                                            </span>
                                        </button>
                                        <input class="form-control text-center" type="number" name="bookToddlers" <?= !empty($bookToddlers)?'value="'.$bookToddlers.'"':'value="0"'; ?> readonly>
                                        <button type="button" class="max-people">
                                            <span class="toddler-plus">
                                                <i class="fa-solid fa-plus"></i>
                                            </span>
                                        </button>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-1">
                    <button type="submit" class="btn-secondary w-100 text-center px-0"><i class="fa-solid fa-magnifying-glass"></i></button>
                </div>
            </div>
            </form>
        </div>
    </section>
    <!-- Header Boat End-->

    <!-- Boat Catalog Start -->
    <section class="boat-catalog-section my-5">
        <div class="container">
            <div class="row h-100">
                <?php if (empty($boat)) { ?>
                    <div class="col-12 d-flex justify-self-center flex-column align-items-center boat-not-found">
                        <img src="<?= base_url('assets/images/boat-not-found.png') ?>" alt="" width="700px">
                        <h4>Oops! We couldn't find the boat you're looking for.</h4>
                        <p class="text-center mx-5" style="width:60%;">It seems the boat you're searching for isn't available right now. Please try again later or explore our other options. We're here to help you navigate through our services.</p>
                    </div>
                <?php 
                    }else {
                    foreach($boat as $key): 
                ?>
                <div class="col-3">
                    <a class="card border-0" aria-hidden="true" href="<?= base_url('user/Booking/index/'.$key['boatId'].'/'.(!empty($bookAdults)?$bookAdults:1).'/'.(!empty($bookTeens)?$bookTeens:0).'/'.(!empty($bookToddlers)?$bookToddlers:0).'/'.(!empty($bookSchedule)?date('d-m-Y', strtotime($bookSchedule)):date('d-m-Y', strtotime('+2 days')))) ?>" target="_blank">
                        <div class="card-header border-0 p-0">
                            <div class="boat-image d-flex">
                                <img src="<?= base_url('assets/uploads/'.explode(', ', $key['boatPictures'])[0]) ?>" alt="" />
                            </div>
                            <div class="top-badges gap-3">
                                <?php foreach(explode(',', $key['boatbadgeNames']) as $badge): ?>
                                    <span class="badge"><?= trim($badge) ?></span>
                                <?php endforeach; ?>
                            </div>
                            <div class="bottom-badges gap-3">
                                <span class="badge"><?= strtoupper($key['boatType']); ?></span>
                                <span class="badge">
                                    <i class="fa-solid fa-users me-2"></i>
                                    <?= $key['maxPeople']; ?>
                                </span>
                            </div>
                        </div>
                        <div class="card-body p-1">
                            <h5><?= $key['boatName'] ?></h5>
                            <p class="my-2"><?= $key['boatStartPoint']; ?></p>
                            <hr class="my-1" />
                            <p class="price-idr mb-3"><?= number_format($key['boatPrice']) ?> IDR</p>
                        </div>
                    </a>
                </div>
                <?php endforeach;} ?>
            </div>
        </div>
    </section>
    <!-- Boat Catalog End -->
</main>

<script text="text/javascript">
    if ( window.history.replaceState ) {
    window.history.replaceState( null, null, '<?= base_url(); ?>');
    }
    // plus minus button
    var aplus = document.querySelector('.adult-plus');
    var tplus = document.querySelector('.teen-plus');
    var tdplus = document.querySelector('.toddler-plus');
    var aminus = document.querySelector('.adult-minus');
    var tminus = document.querySelector('.teen-minus');
    var tdminus = document.querySelector('.toddler-minus');

    var atotal = document.querySelector('input[name="bookAdults"]');
    var ttotal = document.querySelector('input[name="bookTeens"]');
    var tdtotal = document.querySelector('input[name="bookToddlers"]');

    aplus.addEventListener('click', function() {
        if (parseInt(atotal.value) < 20) {
            atotal.value = parseInt(atotal.value) + 1;
        }
    });

    aminus.addEventListener('click', function() {
        if (parseInt(atotal.value) > 1) {
            atotal.value = parseInt(atotal.value) - 1;
        }
    });

    tplus.addEventListener('click', function() {
        if (parseInt(ttotal.value) < 20) {
            ttotal.value = parseInt(ttotal.value) + 1;
        }
    });

    tminus.addEventListener('click', function() {
        if (parseInt(ttotal.value) > 0) {
            ttotal.value = parseInt(ttotal.value) - 1;
        }
    });

    tdplus.addEventListener('click', function() {
        if (parseInt(tdtotal.value) < 5) {
            tdtotal.value = parseInt(tdtotal.value) + 1;
        }
    });

    tdminus.addEventListener('click', function() {
        if (parseInt(tdtotal.value) > 0) {
            tdtotal.value = parseInt(tdtotal.value) - 1;
        }
    });
</script>
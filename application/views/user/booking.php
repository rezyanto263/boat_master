<!-- Step Section Start -->
<section class="step-section pt-5 pb-2">
    <div
        class="container d-flex gap-3 align-items-center justify-content-center"
    >
        <div class="step-boat">
            <div
                class="circle checked mx-auto d-flex justify-content-center align-items-center"
            >
                <i class="fa-solid fa-check"></i>
            </div>
            <h5 class="mb-0 mt-2 text-center">CHOOSE BOAT</h5>
        </div>
        <svg
            width="162"
            height="24"
            viewBox="0 0 162 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
        >
            <path
                d="M161.061 13.0607C161.646 12.4749 161.646 11.5251 161.061 10.9393L151.515 1.3934C150.929 0.807611 149.979 0.807611 149.393 1.3934C148.808 1.97919 148.808 2.92893 149.393 3.51472L157.879 12L149.393 20.4853C148.808 21.0711 148.808 22.0208 149.393 22.6066C149.979 23.1924 150.929 23.1924 151.515 22.6066L161.061 13.0607ZM0 13.5H2V10.5H0V13.5ZM6 13.5H10V10.5H6V13.5ZM14 13.5H18V10.5H14V13.5ZM22 13.5H26V10.5H22V13.5ZM30 13.5H34V10.5H30V13.5ZM38 13.5H42V10.5H38V13.5ZM46 13.5H50V10.5H46V13.5ZM54 13.5H58V10.5H54V13.5ZM62 13.5H66V10.5H62V13.5ZM70 13.5H74V10.5H70V13.5ZM78 13.5H82V10.5H78V13.5ZM86 13.5H90V10.5H86V13.5ZM94 13.5H98V10.5H94V13.5ZM102 13.5H106V10.5H102V13.5ZM110 13.5H114V10.5H110V13.5ZM118 13.5H122V10.5H118V13.5ZM126 13.5H130V10.5H126V13.5ZM134 13.5H138V10.5H134V13.5ZM142 13.5H146V10.5H142V13.5ZM150 13.5H154V10.5H150V13.5ZM158 13.5H160V10.5H158V13.5ZM161.061 13.0607C161.646 12.4749 161.646 11.5251 161.061 10.9393L151.515 1.3934C150.929 0.807611 149.979 0.807611 149.393 1.3934C148.808 1.97919 148.808 2.92893 149.393 3.51472L157.879 12L149.393 20.4853C148.808 21.0711 148.808 22.0208 149.393 22.6066C149.979 23.1924 150.929 23.1924 151.515 22.6066L161.061 13.0607ZM0 13.5H2V10.5H0V13.5ZM6 13.5H10V10.5H6V13.5ZM14 13.5H18V10.5H14V13.5ZM22 13.5H26V10.5H22V13.5ZM30 13.5H34V10.5H30V13.5ZM38 13.5H42V10.5H38V13.5ZM46 13.5H50V10.5H46V13.5ZM54 13.5H58V10.5H54V13.5ZM62 13.5H66V10.5H62V13.5ZM70 13.5H74V10.5H70V13.5ZM78 13.5H82V10.5H78V13.5ZM86 13.5H90V10.5H86V13.5ZM94 13.5H98V10.5H94V13.5ZM102 13.5H106V10.5H102V13.5ZM110 13.5H114V10.5H110V13.5ZM118 13.5H122V10.5H118V13.5ZM126 13.5H130V10.5H126V13.5ZM134 13.5H138V10.5H134V13.5ZM142 13.5H146V10.5H142V13.5ZM150 13.5H154V10.5H150V13.5ZM158 13.5H160V10.5H158V13.5Z"
                fill="#FDA43E"
            />
        </svg>
        <div class="step-tour">
            <div
                class="circle mx-auto d-flex justify-content-center align-items-center"
            >
                <i class="fa-solid fa-umbrella-beach"></i>
            </div>
            <h5 class="mb-0 mt-2 text-center">CHOOSE TOUR</h5>
        </div>
        <svg
            width="162"
            height="24"
            viewBox="0 0 162 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
        >
            <path
                d="M161.061 13.0607C161.646 12.4749 161.646 11.5251 161.061 10.9393L151.515 1.3934C150.929 0.807611 149.979 0.807611 149.393 1.3934C148.808 1.97919 148.808 2.92893 149.393 3.51472L157.879 12L149.393 20.4853C148.808 21.0711 148.808 22.0208 149.393 22.6066C149.979 23.1924 150.929 23.1924 151.515 22.6066L161.061 13.0607ZM0 13.5H2V10.5H0V13.5ZM6 13.5H10V10.5H6V13.5ZM14 13.5H18V10.5H14V13.5ZM22 13.5H26V10.5H22V13.5ZM30 13.5H34V10.5H30V13.5ZM38 13.5H42V10.5H38V13.5ZM46 13.5H50V10.5H46V13.5ZM54 13.5H58V10.5H54V13.5ZM62 13.5H66V10.5H62V13.5ZM70 13.5H74V10.5H70V13.5ZM78 13.5H82V10.5H78V13.5ZM86 13.5H90V10.5H86V13.5ZM94 13.5H98V10.5H94V13.5ZM102 13.5H106V10.5H102V13.5ZM110 13.5H114V10.5H110V13.5ZM118 13.5H122V10.5H118V13.5ZM126 13.5H130V10.5H126V13.5ZM134 13.5H138V10.5H134V13.5ZM142 13.5H146V10.5H142V13.5ZM150 13.5H154V10.5H150V13.5ZM158 13.5H160V10.5H158V13.5ZM161.061 13.0607C161.646 12.4749 161.646 11.5251 161.061 10.9393L151.515 1.3934C150.929 0.807611 149.979 0.807611 149.393 1.3934C148.808 1.97919 148.808 2.92893 149.393 3.51472L157.879 12L149.393 20.4853C148.808 21.0711 148.808 22.0208 149.393 22.6066C149.979 23.1924 150.929 23.1924 151.515 22.6066L161.061 13.0607ZM0 13.5H2V10.5H0V13.5ZM6 13.5H10V10.5H6V13.5ZM14 13.5H18V10.5H14V13.5ZM22 13.5H26V10.5H22V13.5ZM30 13.5H34V10.5H30V13.5ZM38 13.5H42V10.5H38V13.5ZM46 13.5H50V10.5H46V13.5ZM54 13.5H58V10.5H54V13.5ZM62 13.5H66V10.5H62V13.5ZM70 13.5H74V10.5H70V13.5ZM78 13.5H82V10.5H78V13.5ZM86 13.5H90V10.5H86V13.5ZM94 13.5H98V10.5H94V13.5ZM102 13.5H106V10.5H102V13.5ZM110 13.5H114V10.5H110V13.5ZM118 13.5H122V10.5H118V13.5ZM126 13.5H130V10.5H126V13.5ZM134 13.5H138V10.5H134V13.5ZM142 13.5H146V10.5H142V13.5ZM150 13.5H154V10.5H150V13.5ZM158 13.5H160V10.5H158V13.5Z"
                fill="#FDA43E"
            />
        </svg>
        <div class="step-co">
            <div
                class="circle mx-auto d-flex justify-content-center align-items-center"
            >
                <i class="fa-solid fa-credit-card"></i>
            </div>
            <h5 class="mb-0 mt-2 text-center">CHECKOUT & PAY</h5>
        </div>
        <svg
            width="162"
            height="24"
            viewBox="0 0 162 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
        >
            <path
                d="M161.061 13.0607C161.646 12.4749 161.646 11.5251 161.061 10.9393L151.515 1.3934C150.929 0.807611 149.979 0.807611 149.393 1.3934C148.808 1.97919 148.808 2.92893 149.393 3.51472L157.879 12L149.393 20.4853C148.808 21.0711 148.808 22.0208 149.393 22.6066C149.979 23.1924 150.929 23.1924 151.515 22.6066L161.061 13.0607ZM0 13.5H2V10.5H0V13.5ZM6 13.5H10V10.5H6V13.5ZM14 13.5H18V10.5H14V13.5ZM22 13.5H26V10.5H22V13.5ZM30 13.5H34V10.5H30V13.5ZM38 13.5H42V10.5H38V13.5ZM46 13.5H50V10.5H46V13.5ZM54 13.5H58V10.5H54V13.5ZM62 13.5H66V10.5H62V13.5ZM70 13.5H74V10.5H70V13.5ZM78 13.5H82V10.5H78V13.5ZM86 13.5H90V10.5H86V13.5ZM94 13.5H98V10.5H94V13.5ZM102 13.5H106V10.5H102V13.5ZM110 13.5H114V10.5H110V13.5ZM118 13.5H122V10.5H118V13.5ZM126 13.5H130V10.5H126V13.5ZM134 13.5H138V10.5H134V13.5ZM142 13.5H146V10.5H142V13.5ZM150 13.5H154V10.5H150V13.5ZM158 13.5H160V10.5H158V13.5ZM161.061 13.0607C161.646 12.4749 161.646 11.5251 161.061 10.9393L151.515 1.3934C150.929 0.807611 149.979 0.807611 149.393 1.3934C148.808 1.97919 148.808 2.92893 149.393 3.51472L157.879 12L149.393 20.4853C148.808 21.0711 148.808 22.0208 149.393 22.6066C149.979 23.1924 150.929 23.1924 151.515 22.6066L161.061 13.0607ZM0 13.5H2V10.5H0V13.5ZM6 13.5H10V10.5H6V13.5ZM14 13.5H18V10.5H14V13.5ZM22 13.5H26V10.5H22V13.5ZM30 13.5H34V10.5H30V13.5ZM38 13.5H42V10.5H38V13.5ZM46 13.5H50V10.5H46V13.5ZM54 13.5H58V10.5H54V13.5ZM62 13.5H66V10.5H62V13.5ZM70 13.5H74V10.5H70V13.5ZM78 13.5H82V10.5H78V13.5ZM86 13.5H90V10.5H86V13.5ZM94 13.5H98V10.5H94V13.5ZM102 13.5H106V10.5H102V13.5ZM110 13.5H114V10.5H110V13.5ZM118 13.5H122V10.5H118V13.5ZM126 13.5H130V10.5H126V13.5ZM134 13.5H138V10.5H134V13.5ZM142 13.5H146V10.5H142V13.5ZM150 13.5H154V10.5H150V13.5ZM158 13.5H160V10.5H158V13.5Z"
                fill="#FDA43E"
            />
        </svg>
        <div class="step-enjoy">
            <div
                class="circle mx-auto d-flex justify-content-center align-items-center"
            >
                <i class="fa-solid fa-champagne-glasses"></i>
            </div>
            <h5 class="mb-0 mt-2 text-center">ENJOY!</h5>
        </div>
    </div>
</section>

<!-- Step Section End -->

<!-- Booking Section Start -->
<section class="booking-overview-section py-5">
    <div class="container">
        <div class="row gx-5">
            <div class="col-8 boat-content">
                <!-- Boat Overview Section Start -->
                <section class="boat-overview">
                    <div class="row">
                        <div class="header d-flex align-items-center gap-3 mb-3">
                            <i class="fa-solid fa-ship"></i>
                            <h3 class="mb-0 text-left"><?= $boat[0]['boatName'] ?></h3>
                        </div>
                        <div
                            class="boat-overview-slider owl-carousel owl-theme owl-loaded"
                        >
                        <?php foreach(explode(',', $boat[0]['boatPictures']) as $boatPict): ?>
                            <div class="item">
                                <img src="<?= base_url('assets/uploads/'.trim($boatPict)) ?>" alt="" />
                            </div>
                        <?php endforeach; ?>
                        </div>
                    </div>
                    <div class="boat-badges-slider owl-carousel owl-theme mt-3 w-100">
                        <div class="item">
                            <span class="badge white-badges">
                                <i class="fa-solid fa-users me-2"></i>
                                <?= $boat[0]['maxPeople'] ?>
                            </span>
                        </div>
                        <div class="item">
                            <span class="badge white-badges"><?= strtoupper($boat[0]['boatType']) ?></span>
                        </div>
                        <div class="item">
                            <span class="badge white-badges"><?= strtoupper($boat[0]['boatStartPoint']) ?></span>
                        </div>
                        <?php foreach(explode(',', $boat[0]['boatbadgeNames']) as $badges): ?>
                        <div class="item">
                            <span class="badge orange-badges"><?= trim($badges) ?></span>
                        </div>
                        <?php endforeach; ?>
                    </div>
                </section>
                <!-- Boat Overview Section End -->

                <!-- Choose Tour Section Start -->
                <section class="tour-section my-5 py-5">
                    <div class="header d-flex align-items-center gap-3 mb-3">
                        <i class="fa-solid fa-umbrella-beach"></i>
                        <h3 class="mb-0 text-left">Choose Your Tour Package</h3>
                    </div>
                    <div class="anchor-point">
                        <h5 class="subheader">Anchor Point</h5>
                        <?php if ($boat[0]['boatStartPoint'] == 'Bali') { ?>
                        <div class="card p-3 d-flex flex-row gap-3 align-items-center">
                            <div class="card-image d-flex">
                                <img
                                    src="<?= base_url('assets/images/bali.jpg') ?>"
                                    class="img-fluid"
                                    alt="Bali"
                                />
                            </div>
                            <div
                                class="card-details d-flex flex-column position-relative  w-100"
                            >
                                <div class="card-header border-0 p-0">
                                    <h4 class="mb-0">Boat Master Sanur Branch, Bali</h4>
                                    <p class="mb-0">Jl. Kemana Hatiku Senang No.1, Sanur</p>
                                </div>
                                <div class="card-body p-0">
                                    <div class="time d-flex align-items-center gap-2">
                                        <i class="fa-solid fa-clock"></i>
                                        <p class="mb-0 fw-bold">08:00 - 09:00 AM</p>
                                    </div>
                                    <p class="description mb-0">
                                        <?= $boat[0]['boatDesc']; ?>
                                    </p>
                                </div>
                                <a class="maps" href="https://maps.app.goo.gl/uejex2vhLu7Lb17U7" target="blank">
                                    <i class="fa-solid fa-map-location-dot"></i>
                                </a>
                            </div>
                        </div>
                        <?php }else if($boat[0]['boatStartPoint'] == 'Nusa Penida') { ?>
                        <div class="card p-3 d-flex flex-row gap-3 align-items-center">
                            <div class="card-image d-flex">
                                <img
                                    src="<?= base_url('assets/images/nusapenida.jpg') ?>"
                                    class="img-fluid"
                                    alt="Nusa Penida"
                                />
                            </div>
                            <div
                                class="card-details d-flex flex-column position-relative w-100"
                            >
                                <div class="card-header border-0 p-0">
                                    <h4 class="mb-0">Boat Master, Nusa Penida</h4>
                                    <p class="mb-0">Jl. Kemana Hatiku Senang No.1, Sanur</p>
                                </div>
                                <div class="card-body p-0">
                                    <div class="time d-flex align-items-center gap-2">
                                        <i class="fa-solid fa-clock"></i>
                                        <p class="mb-0 fw-bold">08:00 - 09:00 AM</p>
                                    </div>
                                    <p class="description mb-0">
                                        <?= $boat[0]['boatDesc']; ?>
                                    </p>
                                </div>
                                <a class="maps" href="https://maps.app.goo.gl/QJ3kaQBUeSvZBhVK8" target="blank">
                                    <i class="fa-solid fa-map-location-dot"></i>
                                </a>
                            </div>
                        </div>
                        <?php } ?>
                    </div>
                    <div class="tour-packages mt-4">
                        <h5 class="subheader">Tour Packages (Click to Choose!)</h5>
                        <div class="accordion" id="boat-tour-package">
                            <?php 
                                foreach($package as $key): 
                                    if ($boat[0]['boatType'] == 'Private') {
                            ?>
                                <div class="accordion-item mb-3">
                                    <div class="accordion-header">
                                        <button
                                            class="accordion-button flex-column align-items-start collapsed"
                                            type="button"
                                            data-bs-toggle="collapse"
                                            data-bs-target="#boat-tour<?= $key['packageId']; ?>"
                                            aria-expanded="false"
                                        >
                                            <div class="d-flex gap-2">
                                                <h4 class="mb-1"><?= $key['packageName']; ?></h4>
                                                <?= $key['packageType'] == 'Private'? '<div class="private-boat-only-badge mb-3">SPECIAL FOR PRIVATE BOAT!</div>':''; ?>
                                            </div>
                                            <div class="package-badges d-flex gap-2">
                                                <?php 
                                                    foreach(explode('`', $key['packagebadgeNames']) as $badge): 
                                                        if (trim($badge)=='BOAT TOUR') {
                                                ?>    
                                                <span class="badge gap-1">
                                                    <i class="fa-solid fa-ship"></i>
                                                    <p class="mb-0">BOAT TOUR</p>
                                                </span>
                                                <?php }else if(trim($badge)=='SWIMMING') { ?>
                                                <span class="badge gap-1">
                                                    <i class="fa-solid fa-mask"></i>
                                                    <p class="mb-0">SWIMMING</p>
                                                </span>
                                                <?php }else if(trim($badge)=='SNORKELING') { ?>
                                                <span class="badge gap-1">
                                                    <i class="fa-solid fa-mask"></i>
                                                    <p class="mb-0">SNORKELING</p>
                                                </span>
                                                <?php }else if(trim($badge)=='LUNCH') { ?>
                                                <span class="badge gap-1">
                                                    <i class="fa-solid fa-bell-concierge"></i>
                                                    <p class="mb-0">LUNCH</p>
                                                </span>
                                                <?php }else if(trim($badge)=='CLIFF') { ?>
                                                <span class="badge gap-1">
                                                    <i class="fa-solid fa-mountain-sun"></i>
                                                    <p class="mb-0">CLIFF</p>
                                                </span>
                                                <?php }else { ?>
                                                <span class="badge">
                                                    <p class="mb-0"><?= trim($badge) ?></p>
                                                </span>
                                                <?php }endforeach; ?>
                                            </div>
                                        </button>
                                    </div>
                                    <div
                                        id="boat-tour<?= $key['packageId'] ?>"
                                        class="accordion-collapse collapse"
                                        data-bs-parent="#boat-tour-package"
                                    >
                                        <div class="accordion-body" data-value="<?= $key['packageId']; ?>">
                                            <div class="anchor d-flex align-items-center gap-1">
                                                <embed
                                                    src="<?= base_url('assets/images/start-point.svg') ?>"
                                                    class="d-flex"
                                                />
                                                <div>
                                                    <h5 class="mb-0">08:00 AM</h5>
                                                    <p class="mb-0">Departure (Bali or Nusa Penida)</p>
                                                </div>
                                            </div>
                                            <?php 
                                                $id=0;
                                                $countTour = count(explode('`', $key['tourIds']));
                                                foreach(explode('`', $key['tourIds']) as $tourId): 
                                            ?>
                                            <?php if ($id == ($countTour-1)) { ?>
                                            <div class="end-point d-flex align-items-end gap-1">
                                                <div>
                                                    <embed
                                                        src="<?= base_url('assets/images/end-point.svg') ?>"
                                                        class="d-flex align-items-start"
                                                    />
                                                    <br />
                                                </div>
                                                <div>
                                                    <h5 class="mb-0"><?= date("h:i A", strtotime(explode('`', $key['tourTimes'])[$id])) ?></h5>
                                                    <p class="mb-0"><?= explode('`', $key['tourDescs'])[$id] ?></p>
                                                </div>
                                            </div>
                                            <?php }else { ?>
                                            <div class="way-point d-flex align-items-end gap-1">
                                                <embed
                                                    src="<?= base_url('assets/images/way-point.svg') ?>"
                                                    class="d-flex"
                                                />
                                                <div>
                                                    <h5 class="mb-0"><?= date("h:i A", strtotime(explode('`', $key['tourTimes'])[$id])) ?></h5>
                                                    <p class="mb-0"><?= explode('`', $key['tourDescs'])[$id] ?></p>
                                                </div>
                                            </div>
                                            <?php } $id++; endforeach; ?>
                                        </div>
                                    </div>
                                </div>
                            <?php }else if (($boat[0]['boatType'] == 'Shared') && ($key['packageType'] == 'Shared')) { ?>
                                <div class="accordion-item mb-3">
                                    <div class="accordion-header">
                                        <button
                                            class="accordion-button flex-column align-items-start collapsed"
                                            type="button"
                                            data-bs-toggle="collapse"
                                            data-bs-target="#boat-tour<?= $key['packageId']; ?>"
                                            aria-expanded="false"
                                        >
                                            <h4 class="mb-1"><?= $key['packageName']; ?></h4>
                                            <div class="package-badges d-flex gap-2">
                                                <?php 
                                                    foreach(explode('`', $key['packagebadgeNames']) as $badge): 
                                                        if (trim($badge)=='BOAT TOUR') {
                                                ?>    
                                                <span class="badge gap-1">
                                                    <i class="fa-solid fa-ship"></i>
                                                    <p class="mb-0">BOAT TOUR</p>
                                                </span>
                                                <?php }else if(trim($badge)=='SWIMMING') { ?>
                                                <span class="badge gap-1">
                                                    <i class="fa-solid fa-mask"></i>
                                                    <p class="mb-0">SWIMMING</p>
                                                </span>
                                                <?php }else if(trim($badge)=='SNORKELING') { ?>
                                                <span class="badge gap-1">
                                                    <i class="fa-solid fa-mask"></i>
                                                    <p class="mb-0">SNORKELING</p>
                                                </span>
                                                <?php }else if(trim($badge)=='LUNCH') { ?>
                                                <span class="badge gap-1">
                                                    <i class="fa-solid fa-bell-concierge"></i>
                                                    <p class="mb-0">LUNCH</p>
                                                </span>
                                                <?php }else if(trim($badge)=='CLIFF') { ?>
                                                <span class="badge gap-1">
                                                    <i class="fa-solid fa-mountain-sun"></i>
                                                    <p class="mb-0">CLIFF</p>
                                                </span>
                                                <?php }else { ?>
                                                <span class="badge">
                                                    <p class="mb-0"><?= trim($badge) ?></p>
                                                </span>
                                                <?php }endforeach; ?>
                                            </div>
                                        </button>
                                    </div>
                                    <div
                                        id="boat-tour<?= $key['packageId'] ?>"
                                        class="accordion-collapse collapse"
                                        data-bs-parent="#boat-tour-package"
                                    >
                                        <div class="accordion-body" data-value="<?= $key['packageId']; ?>">
                                            <div class="anchor d-flex align-items-center gap-1">
                                                <embed
                                                    src="<?= base_url('assets/images/start-point.svg') ?>"
                                                    class="d-flex"
                                                />
                                                <div>
                                                    <h5 class="mb-0">08:00 AM</h5>
                                                    <p class="mb-0">Departure (Bali or Nusa Penida)</p>
                                                </div>
                                            </div>
                                            <?php 
                                                $id=0;
                                                $countTour = count(explode('`', $key['tourIds']));
                                                foreach(explode('`', $key['tourIds']) as $tourId): 
                                            ?>
                                            <?php if ($id == ($countTour-1)) { ?>
                                            <div class="end-point d-flex align-items-end gap-1">
                                                <div>
                                                    <embed
                                                        src="<?= base_url('assets/images/end-point.svg') ?>"
                                                        class="d-flex align-items-start"
                                                    />
                                                    <br />
                                                </div>
                                                <div>
                                                    <h5 class="mb-0"><?= date("h:i A", strtotime(explode('`', $key['tourTimes'])[$id])) ?></h5>
                                                    <p class="mb-0"><?= explode('`', $key['tourDescs'])[$id] ?></p>
                                                </div>
                                            </div>
                                            <?php }else { ?>
                                            <div class="way-point d-flex align-items-end gap-1">
                                                <embed
                                                    src="<?= base_url('assets/images/way-point.svg') ?>"
                                                    class="d-flex"
                                                />
                                                <div>
                                                    <h5 class="mb-0"><?= date("h:i A", strtotime(explode('`', $key['tourTimes'])[$id])) ?></h5>
                                                    <p class="mb-0"><?= explode('`', $key['tourDescs'])[$id] ?></p>
                                                </div>
                                            </div>
                                            <?php } $id++; endforeach; ?>
                                        </div>
                                    </div>
                                </div>
                            <?php }endforeach; ?>
                        </div>
                    </div>
                </section>
                <!-- Choose Tour Section End -->
                
                <?php if ($boat[0]['boatType'] == 'Private') { ?>
                <!-- Extra Section Start -->
                <section class="extra-section">
                    <div class="header d-flex align-items-center gap-3 mb-3">
                        <i class="fa-solid fa-icons"></i>
                        <h3 class="mb-0 text-left">Exclusive Cruise Add-Ons</h3>
                    </div>
                    <ul class="nav nav-pills mb-3 extras-nav gap-2">
                        <li class="nav-item recommended-extra">
                            <button
                                class="nav-link active"
                                data-bs-toggle="pill"
                                data-bs-target="#recommended"
                                type="button"
                                aria-selected="true"
                            >
                                <i class="fa-solid fa-thumbs-up me-1"></i>
                                Recommended
                            </button>
                        </li>
                        <li class="nav-item">
                            <button
                                class="nav-link"
                                data-bs-toggle="pill"
                                data-bs-target="#free"
                                type="button"
                                aria-selected="false"
                            >
                                <i class="fa-solid fa-hand-holding-heart me-1"></i>
                                Free
                            </button>
                        </li>
                        <li class="nav-item">
                            <button
                                class="nav-link"
                                data-bs-toggle="pill"
                                data-bs-target="#addons"
                                type="button"
                                aria-selected="false"
                            >
                                Add-Ons
                            </button>
                        </li>
                    </ul>
                    <div class="tab-content extras-tab">
                        <div
                            class="tab-pane fade show active"
                            id="recommended"
                            tabindex="0"
                        >
                            <div class="row">
                                <?php 
                                    foreach($extra as $key): 
                                        if ($key['extraCategory'] == 'Recommended') {
                                ?>
                                <div class="col-4 mb-4">
                                    <div class="card border-0 d-flex justify-content-center">
                                        <div class="extra-image d-flex">
                                            <img src="<?= base_url('assets/uploads/'.$key['extraPicture']) ?>" alt="" />
                                        </div>
                                        <div class="extra-desc px-1 my-1">
                                            <h5 class="mb-1"><?= $key['extraName'] ?></h5>
                                            <p class="mb-1">
                                                <?= $key['extraDesc'] ?>
                                            </p>
                                            <hr class="my-1" />
                                            <span class="price"><?= number_format($key['extraPrice']) ?> IDR</span>
                                        </div>
                                        <button class="btn-outline-primary" id="addextra" data-value="<?= $key['extraId']; ?>">ADD</button>
                                    </div>
                                </div>
                                <?php }endforeach; ?>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="free" tabindex="0">
                            <div class="row">
                                <?php 
                                    foreach($extra as $key): 
                                        if ($key['extraCategory'] == 'Free') {
                                ?>
                                <div class="col-4 mb-4">
                                    <div class="card border-0 d-flex justify-content-center">
                                        <div class="extra-image d-flex">
                                            <img src="<?= base_url('assets/uploads/'.$key['extraPicture']) ?>" alt="" />
                                        </div>
                                        <div class="extra-desc px-1 my-1">
                                            <h5 class="mb-1"><?= $key['extraName'] ?></h5>
                                            <p class="mb-1">
                                                <?= $key['extraDesc'] ?>
                                            </p>
                                            <hr class="my-1" />
                                            <span class="price"><?= number_format($key['extraPrice']) ?> IDR</span>
                                        </div>
                                        <button class="btn-outline-primary" id="addextra" data-value="<?= $key['extraId']; ?>">ADD</button>
                                    </div>
                                </div>
                                <?php }endforeach; ?>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="addons" tabindex="0">
                            <div class="row">
                            <?php 
                                    foreach($extra as $key): 
                                        if ($key['extraCategory'] == 'Add-Ons') {
                                ?>
                                <div class="col-4 mb-4">
                                    <div class="card border-0 d-flex justify-content-center">
                                        <div class="extra-image d-flex">
                                            <img src="<?= base_url('assets/uploads/'.$key['extraPicture']) ?>" alt="" />
                                        </div>
                                        <div class="extra-desc px-1 my-1">
                                            <h5 class="mb-1"><?= $key['extraName'] ?></h5>
                                            <p class="mb-1">
                                                <?= $key['extraDesc'] ?>
                                            </p>
                                            <hr class="my-1" />
                                            <span class="price"><?= number_format($key['extraPrice']) ?> IDR</span>
                                        </div>
                                        <button class="btn-outline-primary" id="addextra" data-value="<?= $key['extraId']; ?>">ADD</button>   
                                    </div>
                                </div>
                                <?php }endforeach; ?>
                            </div>
                        </div>
                    </div>
                </section>
                <!-- Extra Section End -->
                <?php } ?>
            </div>
            <div class="col-4 pt-1 ps-0">
                <div class="details-order sticky-top mt-5 p-4">
                <form action="<?= base_url('user/Booking/addBooking') ?>" method="post" class="needs-validation" novalidate>
                    <div class="details-header">
                        <h3 class="mb-1">Order Details</h3>
                        <hr class="border-2 mb-3 mt-2" />
                    </div>
                    <div class="row gx-2">
                        <div class="col-4 text-center">
                            Adults (14-60)
                            <div class="adult">
                                <div
                                    class="wrapper d-flex align-items-center justify-content-between"
                                >
                                    <button type="button" class="max-people">
                                        <span class="adult-minus">
                                            <i class="fa-solid fa-minus"></i>
                                        </span>
                                    </button>
                                    <input type="number" class="adult-total p-0 text-center bg-white" name="bookAdults" min="1" max="<?= $boat[0]['maxPeople']; ?>" <?= $bookAdults==null? 'value="1"':'value="'.$bookAdults.'"'; ?> readonly>
                                    <button type="button" class="max-people">
                                        <span class="adult-plus">
                                            <i class="fa-solid fa-plus"></i>
                                        </span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-4 text-center">
                            Teens (6-13)
                            <div class="teen">
                                <div
                                    class="wrapper d-flex align-items-center justify-content-between"
                                >
                                    <button type="button" class="max-people">
                                        <span class="teen-minus">
                                            <i class="fa-solid fa-minus"></i>
                                        </span>
                                    </button>
                                    <input type="number" class="teen-total p-0 text-center bg-white" name="bookTeens" min="0" max="5" <?= $bookTeens==null? 'value="0"':'value="'.$bookTeens.'"'; ?> readonly>
                                    <button type="button" class="max-people">
                                        <span class="teen-plus">
                                            <i class="fa-solid fa-plus"></i>
                                        </span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="col-4 text-center">
                            Toddlers (0-5)
                            <div class="toddler">
                                <div
                                    class="wrapper d-flex align-items-center justify-content-between"
                                >
                                    <button type="button" class="max-people">
                                        <span class="toddler-minus">
                                            <i class="fa-solid fa-minus"></i>
                                        </span>
                                    </button>
                                    <input type="number" class="toddler-total p-0 text-center bg-white" name="bookToddlers" min="0" max="3" <?= $bookToddlers==null? 'value="0"':'value="'.$bookToddlers.'"'; ?> readonly>
                                    <button type="button" class="max-people">
                                        <span class="toddler-plus">
                                            <i class="fa-solid fa-plus"></i>
                                        </span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row my-2">
                        <div class="col-12 position-relative">
                            <input class="w-100 text-center bg-white" type="date" value="<?= date('Y-m-d', strtotime($bookSchedule)); ?>" disabled>
                            <input class="w-100 text-center bg-white" type="date" name="bookSchedule" value="<?= date('Y-m-d', strtotime($bookSchedule)); ?>" hidden>
                        </div>
                    </div>
                    <div class="order-items p-3 mb-2">
                        <div class="row g-0">
                            <div class="col-lg-8 col text-start">
                                <p class="item-name mb-1"><?= $boat[0]['boatName']; ?></p>
                                <input type="number" name="boatId" value="<?= $boat[0]['boatId']; ?>" hidden>
                                <p class="item-name mb-1" id="package-name"></p>
                                <p class="item-name mb-1" id="bookAdults"></p>
                                <p class="item-name mb-1" id="bookTeens"></p>
                                <p class="item-name mb-1" id="bookToddlers"></p>
                                <input type="number" name="packageId" id="packageId" hidden required>
                                <div class="extra-name-container"></div>
                                <p class="discount-name mb-1">Discount 10%</p>
                            </div>
                            <div class="col-lg-4 text-end">
                                <p class="item-price mb-1"><?= number_format($boat[0]['boatPrice']); ?></p>
                                <span class="packagePrice" hidden></span>
                                <p class="item-price mb-1" id="package-price"></p>
                                <p class="item-price mb-1" id="bookAdultsPrice"></p>
                                <p class="item-price mb-1" id="bookTeensPrice"></p>
                                <p class="item-price mb-1" id="bookToddlersPrice"></p>
                                <div class="extra-price-container"></div>
                                <p class="discount-price mb-1">- <?= number_format(($boat[0]['boatPrice']+400000)*0.1); ?></p>
                            </div>
                        </div>
                        <hr class="mt-1 mb-3" />
                        <div class="total-price d-flex justify-content-between">
                            <p class="m-0 fw-bold">Total Price</p>
                            <input type="number" name="bookPrice" hidden>
                            <p class="mb-0 fw-bold final-price"><?= number_format(($boat[0]['boatPrice']+400000)-($boat[0]['boatPrice']+400000)*0.1); ?> IDR</p>
                        </div>
                    </div>
                    <button type="submit" class="btn-secondary w-100">CHECKOUT!</button>
                    <hr class="border-2 my-4" />
                    <input type="number" id="packageId" hidden required>
                    <div class="invalid-feedback text-center">
                        You must select a package tour!
                    </div>
                </form>                
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Boat Section End -->

<?php
$packageNames = [];
foreach ($package as $p) {
    $packageNames[$p['packageId']] = $p['packageName'];
}
$packagePrices = [];
foreach ($package as $p) {
    $packagePrices[$p['packageId']] = $p['packagePrice'];
}
$extraNames = [];
foreach ($extra as $e) {
    $extraNames[$e['extraId']] = $e['extraName'];
}
$extraPrices = [];
foreach ($extra as $e) {
    $extraPrices[$e['extraId']] = $e['extraPrice'];
}
?>

<script>

var packageNames = <?= json_encode($packageNames); ?>;
var packagePrices = <?= json_encode($packagePrices); ?>;
var extraNames = <?= json_encode($extraNames); ?>;
var extraPrices = <?= json_encode($extraPrices); ?>;

    
document.addEventListener('DOMContentLoaded', function() {
    var boatPrice = <?= $boat[0]['boatPrice']; ?>;
    var maxPeople = <?= !empty($bookedPassengers)?$boat[0]['maxPeople']-$bookedPassengers:$boat[0]['maxPeople']; ?>;

    var finalPrice = document.querySelector('input[name="bookPrice"]');
    var displayFinalPrice = document.querySelector('.final-price')

    // plus minus button
    var aplus = document.querySelector('.adult-plus');
    var tplus = document.querySelector('.teen-plus');
    var tdplus = document.querySelector('.toddler-plus');
    var aminus = document.querySelector('.adult-minus');
    var tminus = document.querySelector('.teen-minus');
    var tdminus = document.querySelector('.toddler-minus');

    var atotal = document.querySelector('.adult-total');
    var ttotal = document.querySelector('.teen-total');
    var tdtotal = document.querySelector('.toddler-total');

    var adultPrice = 400000;
    var teenPrice = 250000;
    var toddlerPrice = 50000;

    var bookAdults = document.querySelector('#bookAdults');
    
    var bookTeens = document.querySelector('#bookTeens');
    var bookToddlers = document.querySelector('#bookToddlers');
    var bookAdultsPrice = document.querySelector('#bookAdultsPrice');
    var bookTeensPrice = document.querySelector('#bookTeensPrice');
    var bookToddlersPrice = document.querySelector('#bookToddlersPrice');

    bookAdults.textContent = 'Adults x'+<?= $bookAdults ?>;
    bookAdultsPrice.textContent = new Intl.NumberFormat({
        style: 'currency'
    }).format(parseInt(atotal.value) * adultPrice);
    <?= $bookTeens ?> == 0 ? '': bookTeens.textContent = 'Teens x'+<?= $bookTeens ?>;
    <?= $bookTeens ?> == 0 ? '': bookTeensPrice.textContent = new Intl.NumberFormat({
        style: 'currency'
    }).format(parseInt(ttotal.value) * teenPrice);
    <?= $bookToddlers ?> == 0 ? '': bookToddlers.textContent = 'Toddlers x'+<?= $bookToddlers ?>;
    <?= $bookToddlers ?> == 0 ? '': bookToddlersPrice.textContent = new Intl.NumberFormat({
        style: 'currency'
    }).format(parseInt(tdtotal.value) * toddlerPrice);

    var discountPrice = document.querySelector('.discount-price');
    var packPrice = document.querySelector('.packagePrice');
    packPrice.value = '';
    displayPrice();

    // adults
    aplus.addEventListener('click', function() {
        var totalPeople = parseInt(atotal.value) + parseInt(ttotal.value);
        if (totalPeople < maxPeople) {
            atotal.value = parseInt(atotal.value) + 1;
            bookAdults.textContent = 'Adults x' + atotal.value;
            bookAdultsPrice.textContent = new Intl.NumberFormat({
                style: 'currency'
            }).format(parseInt(atotal.value) * adultPrice);
            displayPrice();
        }
    });
    aminus.addEventListener('click', function() {
        if (parseInt(atotal.value) > 1) {
            atotal.value = parseInt(atotal.value) - 1;
            bookAdults.textContent = 'Adults x' + atotal.value;
            bookAdultsPrice.textContent = new Intl.NumberFormat({
                style: 'currency'
            }).format(parseInt(atotal.value) * adultPrice);
            displayPrice();
        }
    });

    // teens
    tplus.addEventListener('click', function() {
        var totalPeople = parseInt(atotal.value) + parseInt(ttotal.value);
        if (totalPeople < maxPeople) {
            ttotal.value = parseInt(ttotal.value) + 1;
            bookTeens.textContent = ttotal.value == 0? '' : 'Teens x' + ttotal.value;
            bookTeensPrice.textContent = ttotal.value == 0? '' : new Intl.NumberFormat({
                style: 'currency'
            }).format(parseInt(ttotal.value) * teenPrice);
            displayPrice();
        }
    });
    tminus.addEventListener('click', function() {
        if (parseInt(ttotal.value) > 0) {
            ttotal.value = parseInt(ttotal.value) - 1;
            bookTeens.te = 'Teens x' + ttotal.value;
            bookTeens.textContent = ttotal.value == 0? '' : 'Teens x' + ttotal.value;
            bookTeensPrice.textContent = ttotal.value == 0? '' : new Intl.NumberFormat({
                style: 'currency'
            }).format(parseInt(ttotal.value) * teenPrice);
            displayPrice();
        }
    });

    // toddlers
    tdplus.addEventListener('click', function() {
        if (parseInt(tdtotal.value) < 5) {
            tdtotal.value = parseInt(tdtotal.value) + 1;
            bookToddlers.textContent = tdtotal.value == 0? '' : 'Toddlers x' + tdtotal.value;
            bookToddlersPrice.textContent = tdtotal.value == 0? '' : new Intl.NumberFormat({
                style: 'currency'
            }).format(parseInt(tdtotal.value) * toddlerPrice);
            displayPrice();
        }
    });
    tdminus.addEventListener('click', function() {
        if (parseInt(tdtotal.value) > 0) {
            tdtotal.value = parseInt(tdtotal.value) - 1;
            bookToddlers.textContent = tdtotal.value == 0? '' : 'Toddlers x' + tdtotal.value;
            bookToddlersPrice.textContent = tdtotal.value == 0? '' : new Intl.NumberFormat({
                style: 'currency'
            }).format(parseInt(tdtotal.value) * toddlerPrice);
            displayPrice();
        }
    });

    var accordion = document.querySelector('#boat-tour-package');
    var inputPackage = document.querySelectorAll('#packageId');
    accordion.addEventListener('shown.bs.collapse', event => {
        var selectedValue = $(event.target).find('.accordion-body').data('value');
        inputPackage.forEach(function(input) {
            input.value = selectedValue;
        });
        var packageName = packageNames[selectedValue];
        var packagePrice = packagePrices[selectedValue];
        packPrice.value = packagePrice;
        document.querySelector('#package-name').textContent = packageName;
        document.querySelector('#package-price').textContent = new Intl.NumberFormat({style: 'currency',}).format(packagePrice);
        displayPrice();
    });
    accordion.addEventListener('hidden.bs.collapse', event => {
        var selectedValue = $(event.target).find('.accordion-body').data('value');
        inputPackage.forEach(function(input) {
            input.value = null;
        });
        var packageName = packageNames[selectedValue];
        var packagePrice = packagePrices[selectedValue];
        packPrice.value = ''; 
        document.querySelector('#package-name').textContent = '';
        document.querySelector('#package-price').textContent = '';
        displayPrice();
    });

    var extraNameContainer = $('.extra-name-container');
    var extraPriceContainer = $('.extra-price-container');
    $('.extra-section').on('click', '#addextra', event => {
        var extraId = $(event.target).data('value');
        var extraPrice = extraPrices[extraId];
        var extraName = extraNames[extraId];
        var extraNameText = extraNameContainer.find('.extra-name').text();
        var checkExtra = extraNameText.includes(extraName);
        if (!checkExtra) {
            event.target.classList.add('added');
            $(event.target).text('ADDED');
            extraNameContainer.append('<p class="extra-name mb-1" id="extra-name-'+ extraId +'">'+ extraName +'</p>');
            extraPriceContainer.append('<p class="extra-price mb-1" id="extra-price-'+ extraId +'">'+ new Intl.NumberFormat({
                style: 'currency',
            }).format(extraPrice) +'</p>');
            addInputExtra(extraId);
        }else {
            event.target.classList.remove('added');
            $(event.target).text('ADD');
            extraNameContainer.find('#extra-name-'+ extraId).remove();
            extraPriceContainer.find('#extra-price-'+ extraId).remove();
            delInputExtra(extraId);
        }
        console.log(document.querySelector('input[name="extraIds[]"]').value);
        displayPrice();
    });

    function parseInput(value) {
        return isNaN(parseFloat(value)) ? 0 : parseFloat(value);
    }

    function addInputExtra(value) {
        var newInput = document.createElement('input');
        newInput.type = 'number';
        newInput.name = 'extraIds[]';
        newInput.hidden = true;
        newInput.value = value;

        extraNameContainer.append(newInput);
    }

    function delInputExtra(value) {
        var allInput = document.querySelectorAll('input[name="extraIds[]"]');

        allInput.forEach(function(input) {
            if (input.value == value) {
                input.remove();
            }
        });
    }

    function displayPrice() {
        if (packPrice.value == '') {
            var totalPrice = boatPrice + (parseInt(atotal.value)*adultPrice) + (parseInt(ttotal.value)*teenPrice) + (parseInt(tdtotal.value)*toddlerPrice);
        }else {
            var totalPrice = boatPrice + parseFloat(packPrice.value) + (parseInt(atotal.value)*adultPrice) + (parseInt(ttotal.value)*teenPrice) + (parseInt(tdtotal.value)*toddlerPrice);
        }
        
        $('.extra-price').each(function() {
            totalPrice = totalPrice + parseFloat($(this).text().replace(',', ''));
        });
        discountPrice.textContent = '- ' + new Intl.NumberFormat({
        style: 'currency',
        }).format(totalPrice * 0.1);
        finalPrice.value = totalPrice - (totalPrice * 0.1);
        displayFinalPrice.textContent = new Intl.NumberFormat({
        style: 'currency',
        }).format(parseFloat(finalPrice.value))+' IDR';
    }
    

});
</script>
